{"version":3,"file":"/Modules/Attribute/Assets/admin/js/attribute.js","mappings":"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","sources":["webpack://fleetcart/./Modules/Attribute/Resources/assets/admin/js/AttributeValues.js","webpack://fleetcart/./Modules/Attribute/Resources/assets/admin/js/ProductAttributes.js","webpack://fleetcart/./Modules/Attribute/Resources/assets/admin/js/main.js"],"sourcesContent":["export default class {\r\n    constructor() {\r\n        this.attributeId = 0;\r\n        this.valuesCount = 0;\r\n\r\n        this.addOldValues(FleetCart.data['attribute.values']);\r\n\r\n        if (this.valuesCount === 0) {\r\n            this.addAttributeValue();\r\n        }\r\n\r\n        this.eventListeners();\r\n        this.sortable();\r\n\r\n        window.admin.removeSubmitButtonOffsetOn('#values');\r\n    }\r\n\r\n    addOldValues(values = {}) {\r\n        for (let value of values) {\r\n            this.addAttributeValue(value);\r\n        }\r\n    }\r\n\r\n    addAttributeValue(value = { id: '', value: '' }) {\r\n        let template = _.template($('#attribute-value-template').html());\r\n        let html = template({ valueId: this.valuesCount++, value });\r\n\r\n        $('#attribute-values').append(html);\r\n\r\n        window.admin.tooltip();\r\n    }\r\n\r\n    eventListeners() {\r\n        $('#add-new-value').on('click', () => this.addAttributeValue());\r\n\r\n        $('#attribute-values').on('click', '.delete-row', (e) => {\r\n            $(e.currentTarget).closest('tr').remove();\r\n        });\r\n    }\r\n\r\n    sortable() {\r\n        Sortable.create(document.getElementById('attribute-values'), {\r\n            handle: '.drag-icon',\r\n            animation: 150,\r\n        });\r\n    }\r\n}\r\n","export default class {\r\n    constructor() {\r\n        this.attributeCount = 0;\r\n\r\n        this.addProductAttributes(FleetCart.data['product.attributes']);\r\n\r\n        if (this.attributeCount === 0) {\r\n            this.addProductAttribute();\r\n        }\r\n\r\n        this.addProductAttributesErrors(FleetCart.errors['product.attributes']);\r\n\r\n        this.eventListeners();\r\n        this.triggerSelected();\r\n        this.sortable();\r\n    }\r\n\r\n    addProductAttributes(attributes) {\r\n        for (let attribute of attributes) {\r\n            this.addProductAttribute(attribute);\r\n        }\r\n    }\r\n\r\n    addProductAttribute(attribute = {}) {\r\n        let template = _.template($('#product-attribute-template').html());\r\n\r\n        let html = template({ attributeId: this.attributeCount++, attribute });\r\n\r\n        $('#product-attributes').append(html);\r\n\r\n        window.admin.tooltip();\r\n        window.admin.selectize();\r\n    }\r\n\r\n    addProductAttributesErrors(errors) {\r\n        for (let key in errors) {\r\n            let id = $.escapeSelector(key);\r\n            let parent = $(`#${id}`).parent();\r\n\r\n            parent.addClass('has-error');\r\n            parent.append(`<span class=\"help-block\">${errors[key][0]}</span>`);\r\n        }\r\n    }\r\n\r\n    deleteProductAttribute(e) {\r\n        $(e.currentTarget).closest('tr').remove();\r\n    }\r\n\r\n    changeProductAttributeValues(attributeEl, clearSelected = true) {\r\n        let values = $(attributeEl).find('option:selected').data('values');\r\n\r\n        let id = $.escapeSelector(`attributes.${attributeEl.dataset.attributeId}.values`);\r\n        let attributeValues = $(`#${id}`)[0].selectize;\r\n\r\n        if (clearSelected) {\r\n            attributeValues.clear();\r\n        }\r\n\r\n        attributeValues.clearOptions();\r\n\r\n        let options = attributeValues.options;\r\n\r\n        for (let id in values) {\r\n            attributeValues.addOption({ id, name: values[id] });\r\n\r\n            for (let i in options) {\r\n                attributeValues.addItem(options[i].value);\r\n            }\r\n        }\r\n    }\r\n\r\n    eventListeners() {\r\n        $('#add-new-attribute').on('click', () => this.addProductAttribute());\r\n        $('#product-attributes').on('click', '.delete-row', this.deleteProductAttribute);\r\n        $('#product-attributes-wrapper').on('change', '.attribute', (e) => {\r\n            this.changeProductAttributeValues(e.currentTarget);\r\n        });\r\n    }\r\n\r\n    triggerSelected() {\r\n        $('.attribute').has('option:selected').each((i, el) => {\r\n            this.changeProductAttributeValues(el, false);\r\n        });\r\n    }\r\n\r\n    sortable() {\r\n        Sortable.create(document.getElementById('product-attributes'), {\r\n            handle: '.drag-icon',\r\n            animation: 150,\r\n        });\r\n    }\r\n}\r\n","import AttributeValues from './AttributeValues';\r\nimport ProductAttributes from './ProductAttributes';\r\n\r\nif ($('#attribute-values-wrapper').length !== 0) {\r\n    new AttributeValues();\r\n}\r\n\r\nif ($('#product-attributes-wrapper').length !== 0) {\r\n    new ProductAttributes();\r\n}\r\n"],"names":["_default","_classCallCheck","this","attributeId","valuesCount","addOldValues","FleetCart","data","addAttributeValue","eventListeners","sortable","window","admin","removeSubmitButtonOffsetOn","key","value","_step","_iterator","_createForOfIteratorHelper","arguments","length","undefined","s","n","done","err","e","f","id","html","_","template","$","valueId","append","tooltip","_this","on","currentTarget","closest","remove","Sortable","create","document","getElementById","handle","animation","attributeCount","addProductAttributes","addProductAttribute","addProductAttributesErrors","errors","triggerSelected","attributes","attribute","selectize","escapeSelector","parent","concat","addClass","attributeEl","clearSelected","values","find","dataset","attributeValues","clear","clearOptions","options","i","addOption","name","addItem","deleteProductAttribute","changeProductAttributeValues","_this2","has","each","el","AttributeValues","ProductAttributes"],"sourceRoot":""}