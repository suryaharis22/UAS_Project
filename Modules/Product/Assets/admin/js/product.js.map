{"version":3,"file":"/Modules/Product/Assets/admin/js/product.js","mappings":"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","sources":["webpack://fleetcart/./Modules/Product/Resources/assets/admin/js/Download.js","webpack://fleetcart/./Modules/Product/Resources/assets/admin/js/Downloads.js","webpack://fleetcart/./Modules/Product/Resources/assets/admin/js/ProductForm.js","webpack://fleetcart/./Modules/Product/Resources/assets/admin/js/main.js"],"sourcesContent":["export default class {\r\n    constructor(download) {\r\n        this.downloadHtml = this.getDownloadHtml(download);\r\n    }\r\n\r\n    getDownloadHtml(download) {\r\n        let template = _.template($('#product-download-template').html());\r\n\r\n        return $(template(download));\r\n    }\r\n\r\n    render() {\r\n        this.attachEventListeners();\r\n\r\n        return this.downloadHtml;\r\n    }\r\n\r\n    attachEventListeners() {\r\n        this.downloadHtml.find('.delete-row').on('click', () => {\r\n            this.downloadHtml.remove();\r\n        });\r\n\r\n        this.downloadHtml.find('.btn-choose-file').on('click', () => {\r\n            let picker = new MediaPicker();\r\n\r\n            picker.on('select', (file) => {\r\n                this.downloadHtml.find('.download-name').val(file.filename);\r\n                this.downloadHtml.find('.download-file').val(file.id);\r\n            });\r\n        });\r\n    }\r\n}\r\n","import Download from './Download';\r\n\r\nexport default class {\r\n    constructor() {\r\n        this.downloadsCount = 0;\r\n\r\n        this.addDownloads(FleetCart.data['product.downloads']);\r\n\r\n        if (this.downloadsCount === 0) {\r\n            this.addDownload();\r\n        }\r\n\r\n        this.attachEventListeners();\r\n        this.makeDownloadsSortable();\r\n    }\r\n\r\n    addDownloads(downloads) {\r\n        for (let attributes of downloads) {\r\n            this.addDownload(attributes);\r\n        }\r\n    }\r\n\r\n    addDownload(attributes = {}) {\r\n        let download = new Download({ download: attributes });\r\n\r\n        $('#downloads-wrapper').append(download.render());\r\n\r\n        this.downloadsCount++;\r\n        window.admin.tooltip();\r\n    }\r\n\r\n    attachEventListeners() {\r\n        $('#add-new-file').on('click', () => {\r\n            this.addDownload();\r\n        });\r\n    }\r\n\r\n    makeDownloadsSortable() {\r\n        Sortable.create(document.getElementById('downloads-wrapper'), {\r\n            handle: '.drag-icon',\r\n            animation: 150,\r\n        });\r\n    }\r\n}\r\n","export default class {\r\n    constructor() {\r\n        this.managerStock();\r\n\r\n        window.admin.removeSubmitButtonOffsetOn([\r\n            '#images', '#downloads', '#attributes', '#options',\r\n            '#related_products', '#up_sells', '#cross_sells', '#reviews',\r\n        ]);\r\n\r\n        $('#product-create-form, #product-edit-form').on('submit', this.submit);\r\n    }\r\n\r\n    managerStock() {\r\n        $('#manage_stock').on('change', (e) => {\r\n            if (e.currentTarget.value === '1') {\r\n                $('#qty-field').removeClass('hide');\r\n            } else {\r\n                $('#qty-field').addClass('hide');\r\n            }\r\n        });\r\n    }\r\n\r\n    submit(e) {\r\n        e.preventDefault();\r\n\r\n        DataTable.removeLengthFields();\r\n\r\n        window.form.appendHiddenInputs('#product-create-form, #product-edit-form', 'up_sells', DataTable.getSelectedIds('#up_sells .table'));\r\n        window.form.appendHiddenInputs('#product-create-form, #product-edit-form', 'cross_sells', DataTable.getSelectedIds('#cross_sells .table'));\r\n        window.form.appendHiddenInputs('#product-create-form, #product-edit-form', 'related_products', DataTable.getSelectedIds('#related_products .table'));\r\n\r\n        e.currentTarget.submit();\r\n    }\r\n}\r\n","import Downloads from './Downloads';\r\nimport ProductForm from './ProductForm';\r\n\r\nnew ProductForm();\r\nnew Downloads();\r\n"],"names":["_default","download","_classCallCheck","this","downloadHtml","getDownloadHtml","key","value","template","_","$","html","attachEventListeners","_this","find","on","remove","MediaPicker","file","val","filename","id","downloadsCount","addDownloads","FleetCart","data","addDownload","makeDownloadsSortable","downloads","_step","_iterator","_createForOfIteratorHelper","s","n","done","attributes","err","e","f","Download","arguments","length","undefined","append","render","window","admin","tooltip","Sortable","create","document","getElementById","handle","animation","managerStock","removeSubmitButtonOffsetOn","submit","currentTarget","removeClass","addClass","preventDefault","DataTable","removeLengthFields","form","appendHiddenInputs","getSelectedIds","ProductForm","Downloads"],"sourceRoot":""}